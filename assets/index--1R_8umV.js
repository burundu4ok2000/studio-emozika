(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Y(){const e=document.querySelectorAll(".reveal-on-scroll");if(e.length){const t=new IntersectionObserver(n=>{n.forEach(i=>{i.isIntersecting&&(i.target.classList.add("is-visible"),t.unobserve(i.target))})},{threshold:.15});e.forEach(n=>t.observe(n))}}const U=()=>window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;function V(){const e=document.querySelector("#stats"),t=document.querySelectorAll(".stat-number[data-target]");if(e&&t.length){const i=new IntersectionObserver(r=>{r.forEach(s=>{s.isIntersecting&&(U()?t.forEach(o=>{const d=parseInt(o.dataset.target,10),c=o.dataset.suffix||"";isNaN(d)||(o.textContent=d+c)}):t.forEach(o=>n(o)),i.unobserve(s.target))})},{threshold:.3});i.observe(e)}function n(i){const r=parseInt(i.dataset.target,10);if(isNaN(r))return;const s=i.dataset.suffix||"",o=800,d=performance.now();function c(l){const f=Math.min((l-d)/o,1),a=Math.floor(r*f);i.textContent=a+s,f<1&&requestAnimationFrame(c)}requestAnimationFrame(c)}}function z(){const e=document.querySelectorAll("[data-scroll-to]");e.length&&e.forEach(t=>{const n=t.getAttribute("data-scroll-to");n&&t.addEventListener("click",i=>{const r=document.getElementById(n);r&&(i.preventDefault(),r.scrollIntoView({behavior:"smooth",block:"start"}))})})}function G(){const e=document.querySelector(".studio-journey");if(e){let c=function(h){if(!h||!o||!d)return;const y=r.indexOf(h);r.forEach((E,L)=>{E.classList.toggle("is-active",E===h),E.classList.toggle("is-past",y!==-1&&L<y)});const g=h.getAttribute("data-title")||"",u=h.getAttribute("data-text")||"";if(o.textContent=g,d.textContent=u,s&&r.length>1&&y!==-1){const E=y/(r.length-1)*100;s.style.setProperty("--journey-progress",E+"%")}},v=function(){f!==null&&(window.clearInterval(f),f=null)},p=function(){U()||r.length<=1||(v(),f=window.setInterval(()=>{const h=e.querySelector(".studio-journey-step.is-active")||r[0],g=(r.indexOf(h)+1)%r.length,u=r[g];c(u)},a))};var t=c,n=v,i=p;const r=Array.from(e.querySelectorAll(".studio-journey-step[data-title][data-text]")),s=e.querySelector(".studio-journey-track"),o=e.querySelector(".studio-journey-detail-title"),d=e.querySelector(".studio-journey-detail-text");let l=e.querySelector(".studio-journey-step.is-active");!l&&r.length&&(l=r[0]),l&&c(l);let f=null;const a=8e3;U()||p(),e.addEventListener("click",h=>{const y=h.target.closest(".studio-journey-step");!y||!e.contains(y)||(c(y),p())}),e.addEventListener("keydown",h=>{const y=h.key;if(y!=="Enter"&&y!==" "&&y!=="Spacebar")return;const g=h.target.closest(".studio-journey-step");!g||!e.contains(g)||(h.preventDefault(),c(g),p())}),e.addEventListener("mouseenter",v),e.addEventListener("mouseleave",p)}}function K(){const e=document.querySelectorAll(".section-studio .studio-track-path[data-timeline]");e.length&&e.forEach(t=>{const n=Array.from(t.querySelectorAll(".timeline-step"));if(!n.length)return;let i=n.findIndex(f=>f.classList.contains("timeline-step--active"));i<0&&(i=0,n[0].classList.add("timeline-step--active"));function r(f){n.forEach((a,v)=>{a.classList.toggle("timeline-step--active",v===f)})}r(i);const s=t.dataset.autoplay==="true"&&!U();let o=null;const d=6e3;function c(){!s||o!==null||n.length<=1||(o=window.setInterval(()=>{i=(i+1)%n.length,r(i)},d))}function l(){o!==null&&(window.clearInterval(o),o=null)}n.forEach((f,a)=>{f.addEventListener("click",()=>{i=a,r(i),l()})}),t.addEventListener("mouseenter",l),t.addEventListener("mouseleave",c),c()})}function Q(){const e=document.querySelector("#afisha");if(e){let B=function(){return N.filter(function(b){return b.showInAfisha}).sort(function(b,m){const x=typeof b.afishaOrder=="number"?b.afishaOrder:999,A=typeof m.afishaOrder=="number"?m.afishaOrder:999;return x-A})},H=function(b){const m=[];return b.age&&m.push(b.age),b.genre&&m.push(b.genre),b.duration&&m.push(b.duration),b.hall&&m.push(b.hall),b.city&&m.push(b.city),m.join(" • ")},$=function(b){const m=[];return b.genre&&m.push(b.genre),b.age&&m.push(b.age),m.join(" • ")},P=function(){if(!c)return;const b=B();if(!b.length){c.innerHTML='<p class="afisha-empty">Скоро здесь появятся спектакли театра «Эмоцика».</p>';return}const m=b.map(function(x){const A=x.poster&&x.poster.desktop?x.poster.desktop:"",I=$(x);let j="";if(x.badge){let R="afisha-card-badge badge badge--glass";x.badgeType&&(R+=" afisha-card-badge--"+x.badgeType),j='<span class="'+R+'">'+x.badge+"</span>"}return'<article class="afisha-card afisha-card--strip card-luxe" data-play-id="'+x.id+'"><div class="afisha-card-poster-wrapper">'+(A?'<img class="afisha-card-poster-image" src="'+A+'" alt="Постер спектакля '+x.title+'">'+(j?'<div class="afisha-card-badge-wrap">'+j+"</div>":""):"")+'</div><div class="afisha-card-footer">'+(I?'<p class="afisha-card-subline">'+I+"</p>":"")+'<h3 class="afisha-title">'+x.title+'</h3><div class="afisha-buttons afisha-buttons--strip">'+(x.ticketUrl?'<a class="btn btn-primary btn-lg" href="'+x.ticketUrl+'" target="_blank" rel="noopener">Купить билет</a>':"")+'<button type="button" class="btn btn-outline btn-lg" data-play-open="'+x.id+'">Подробнее о спектакле</button></div></div></article>'}).join("");c.innerHTML=m},W=function(b){if(!a||!N.length)return;const m=N.find(function(A){return A.id===b});if(!m)return;const x=H(m);if(p&&(m.badge?(p.textContent=m.badge,p.classList.remove("is-hidden")):(p.textContent="",p.classList.add("is-hidden"))),h&&(h.textContent=m.title||""),y&&(y.textContent=x||"",y.classList.toggle("is-hidden",!x)),g&&(g.textContent=m.tagline||"",g.classList.toggle("is-hidden",!m.tagline)),u&&(u.innerHTML="",Array.isArray(m.description)&&m.description.length&&m.description.forEach(function(A){const I=document.createElement("p");I.textContent=A,u.appendChild(I)})),E&&L&&(E.innerHTML="",Array.isArray(m.whyToWatch)&&m.whyToWatch.length?(m.whyToWatch.forEach(function(A){const I=document.createElement("li");I.textContent=A,E.appendChild(I)}),L.classList.remove("is-hidden")):L.classList.add("is-hidden")),w){const A=m.credits&&m.credits.author;w.textContent=A?"Автор: "+m.credits.author:"",w.classList.toggle("is-hidden",!A)}if(S){const A=m.credits&&m.credits.director;S.textContent=A?"Режиссёр: "+m.credits.director:"",S.classList.toggle("is-hidden",!A)}if(q&&_&&T){q.innerHTML="";const A=m.credits&&Array.isArray(m.credits.cast)?m.credits.cast:[];if(A.length){const I=m.credits.castTitle||"В ролях";_.textContent=I,A.forEach(function(j){const R=document.createElement("li");R.textContent=j,q.appendChild(R)}),T.classList.remove("is-hidden")}else T.classList.add("is-hidden")}if(C&&(C.innerHTML="",m.media&&Array.isArray(m.media.photos)&&m.media.photos.length&&m.media.photos.forEach(function(A){const I=document.createElement("img");I.src=A,I.alt="Фотография спектакля "+m.title,I.className="play-modal-photo",C.appendChild(I)})),k&&(k.innerHTML="",m.media&&m.media.video)){const A=document.createElement("div");A.className="play-modal-video-placeholder",A.textContent="Видео спектакля скоро появится на сайте.",k.appendChild(A)}M&&(m.ticketUrl?(M.href=m.ticketUrl,M.classList.remove("is-hidden")):(M.removeAttribute("href"),M.classList.add("is-hidden"))),a.removeAttribute("hidden"),document.body.classList.add("has-modal-open")},F=function(){a&&(a.setAttribute("hidden","true"),document.body.classList.remove("has-modal-open"))},D=function(){if(!c)return;c.addEventListener("click",function(m){const x=m.target.closest("[data-play-open]");if(!x)return;const A=x.getAttribute("data-play-open");A&&W(A)});function b(m){if(!c)return;const x=c.querySelector(".afisha-card--strip"),A=x?x.getBoundingClientRect().width:320,I=20,j=m==="next"?A+I:-(A+I);c.scrollBy({left:j,behavior:"smooth"})}l&&l.addEventListener("click",function(){b("prev")}),f&&f.addEventListener("click",function(){b("next")}),a&&(v.forEach(function(m){m.addEventListener("click",F)}),a.addEventListener("click",function(m){m.target===a&&F()}),document.addEventListener("keydown",function(m){m.key==="Escape"&&a&&!a.hasAttribute("hidden")&&F()}))};var t=B,n=H,i=$,r=P,s=W,o=F,d=D;const c=e.querySelector("[data-afisha-strip]"),l=e.querySelector(".afisha-strip-arrow--prev"),f=e.querySelector(".afisha-strip-arrow--next"),a=document.querySelector("[data-play-modal]"),v=a?a.querySelectorAll("[data-play-modal-close]"):[],p=a?a.querySelector("[data-play-badge]"):null,h=a?a.querySelector("[data-play-title]"):null,y=a?a.querySelector("[data-play-meta]"):null,g=a?a.querySelector("[data-play-tagline]"):null,u=a?a.querySelector("[data-play-description]"):null,E=a?a.querySelector("[data-play-why]"):null,L=a?a.querySelector("[data-play-why-container]"):null,w=a?a.querySelector("[data-play-author]"):null,S=a?a.querySelector("[data-play-director]"):null,_=a?a.querySelector("[data-play-cast-title]"):null,q=a?a.querySelector("[data-play-cast]"):null,T=a?a.querySelector("[data-play-cast-container]"):null,C=a?a.querySelector("[data-play-photos]"):null,k=a?a.querySelector("[data-play-video]"):null,M=a?a.querySelector("[data-play-ticket]"):null;let N=[];fetch("assets/data/plays.json").then(function(b){if(!b.ok)throw new Error("HTTP "+b.status);return b.json()}).then(function(b){!b||!Array.isArray(b.plays)||(N=b.plays.slice(),P(),D())}).catch(function(b){console.error("Не удалось загрузить данные спектаклей:",b)})}}function J(){const e=document.querySelector("#films");if(e){const r=e.querySelector("[data-films-carousel]"),s=e.querySelector("[data-film-detail]");if(r&&s){let c=function(){r.innerHTML="",o.forEach(a=>{const v=document.createElement("button");v.type="button",v.className="films-card"+(a.id===d?" films-card--active":""),v.setAttribute("data-film-id",a.id);const p=a.year||"Добавить данные",h=a.city||"Добавить данные",y=a.awards||[],g=y.slice(0,2),u=y.length>2?y.length-2:0,E=g.map(w=>{let S="films-card-award-pill badge badge--soft";w.status&&/гран[- ]?при/i.test(w.status)&&(S="films-card-award-pill badge badge--gold");const _=[w.status,w.festival].filter(Boolean).join(" ");return`<span class="${S}">${_}</span>`}).join(""),L=u>0?`<span class="films-card-award-pill films-card-award-pill--more badge badge--outline">+${u} фестиваля</span>`:"";v.innerHTML=`
            <div class="films-card-poster">
              <div class="films-card-poster-inner">
                ${a.title.charAt(0)||"Ф"}
              </div>
            </div>
            <div class="films-card-main">
              <h4 class="films-card-title">${a.title}</h4>
              <p class="films-card-meta">${p} · ${h}</p>
              <p class="films-card-logline">${a.logline||""}</p>
              <div class="films-card-awards">
                ${E}${L}
              </div>
            </div>
          `,v.addEventListener("click",()=>{d!==a.id&&(d=a.id,c(),l(a))}),r.appendChild(v)})},l=function(a){const v=s.querySelector("[data-film-title]"),p=s.querySelector("[data-film-meta]"),h=s.querySelector("[data-film-authors]"),y=s.querySelector("[data-film-synopsis]"),g=s.querySelector("[data-film-awards]"),u=s.querySelector("[data-film-embed]"),E=s.querySelector("[data-film-vk-link]");if(v&&(v.textContent=a.title),p){const L=a.year||"Добавить данные",w=a.city||"Добавить данные";p.textContent=`${L} · ${w}`}if(h){const L=[`Сценарий: ${a.writer||"Добавить данные"}`,`Режиссура: ${a.directors&&a.directors.length?a.directors.join(", "):"Добавить данные"}`,`Оператор: ${a.dop||"Добавить данные"}`];a.editor&&L.push(`Редактор: ${a.editor}`),h.innerHTML=L.map(w=>`<span class="films-detail-author">${w}</span>`).join("")}if(y&&(y.textContent=a.synopsis||""),g){g.innerHTML="";const L=a.awards||[];if(L.length)L.forEach(w=>{const S=document.createElement("li");S.className="films-detail-award";const _=[w.status,w.festival,w.city&&`(${w.city})`,w.year].filter(Boolean);S.textContent=_.join(", "),g.appendChild(S)});else{const w=document.createElement("li");w.className="films-detail-award films-detail-award--empty",w.textContent="Награды будут добавлены позже.",g.appendChild(w)}}if(u&&(a.vkEmbedUrl?u.innerHTML=`
              <iframe
                src="${a.vkEmbedUrl}"
                frameborder="0"
                allowfullscreen
                loading="lazy"
              ></iframe>
            `:u.innerHTML='<div class="films-video-placeholder">Видео появится позже</div>'),E){const L=a.vkPageUrl||a.vkEmbedUrl;L?(E.href=L,E.style.display=""):E.style.display="none"}},f=function(a){o=Array.isArray(a)?a:[],o.length&&(d=o[0].id,c(),l(o[0]))};var t=c,n=l,i=f;let o=[],d=null;fetch("assets/data/films.json").then(function(a){if(!a.ok)throw new Error("HTTP "+a.status);return a.json()}).then(function(a){f(a)}).catch(function(a){console.error("Не удалось загрузить данные фильмов:",a)})}}}function Z(){const e=document.querySelector("#gallery");if(e){let L=function(){return g==="all"?y:y.filter(C=>C.category===g)},w=function(){if(!d)return;const C=L();if(u=C,d.innerHTML="",!C.length){const k=document.createElement("p");k.className="gallery__empty",k.textContent="Скоро здесь появятся новые фотографии.",d.appendChild(k);return}C.forEach((k,M)=>{const N=document.createElement("button");N.type="button",N.className="gallery-card",N.setAttribute("data-gallery-id",k.id),N.setAttribute("data-gallery-index",String(M)),N.innerHTML=`
          <div class="gallery-card__image-wrapper">
            <img
              src="${k.src}"
              alt="${k.alt}"
              class="gallery-card__image"
              loading="lazy"
            >
            <div class="gallery-card__frame"></div>
          </div>
          <div class="gallery-card__meta">
            <div class="gallery-card__title"></div>
            <div class="gallery-card__tag">
              <span class="gallery-card__tag-dot"></span>
              <span class="gallery-card__tag-label"></span>
            </div>
          </div>
        `;const B=N.querySelector(".gallery-card__title"),H=N.querySelector(".gallery-card__tag-label"),$=N.querySelector(".gallery-card__tag");B&&(B.textContent=k.caption||""),H&&$&&(k.categoryLabel?H.textContent=k.categoryLabel:$.style.display="none"),N.addEventListener("click",()=>{_(M)}),d.appendChild(N)})},S=function(){if(!f||!a)return;const C=u[E];if(!C)return;const k=C.full||C.src;f.src=k,f.alt=C.alt||"",a.textContent=C.caption||""},_=function(C){!l||!f||!u.length||(E=C,S(),l.hidden=!1,document.body.classList.add("is-lightbox-open"))},q=function(){l&&(l.hidden=!0,document.body.classList.remove("is-lightbox-open"))},T=function(C){if(!u.length)return;const k=u.length;E=(E+C+k)%k,S()};var t=L,n=w,i=S,r=_,s=q,o=T;const d=e.querySelector("[data-gallery-scroller]"),c=e.querySelectorAll("[data-gallery-filter]"),l=document.querySelector("#gallery-lightbox"),f=l?l.querySelector(".lightbox__image"):null,a=l?l.querySelector(".lightbox__caption"):null,v=l?l.querySelector("[data-lightbox-prev]"):null,p=l?l.querySelector("[data-lightbox-next]"):null,h=l?l.querySelectorAll("[data-lightbox-close]"):[],y=[{id:"rehearsal-1",category:"rehearsal",categoryLabel:"Репетиции",src:"assets/gallery/rehearsal-1.jpg",full:"assets/gallery/rehearsal-1.jpg",alt:"Репетиция в студии «Эмоция»",caption:"Репетиция в студии «Эмоция»"},{id:"show-1",category:"stage",categoryLabel:"Сцена",src:"assets/gallery/show-1.jpg",full:"assets/gallery/show-1.jpg",alt:"Юные актёры на сцене",caption:"Юные актёры на сцене"},{id:"backstage-1",category:"backstage",categoryLabel:"Закулисье",src:"assets/gallery/backstage-1.jpg",full:"assets/gallery/backstage-1.jpg",alt:"Закулисье перед спектаклем",caption:"Закулисье перед спектаклем"},{id:"rehearsal-2",category:"rehearsal",categoryLabel:"Репетиции",src:"assets/gallery/rehearsal-2.jpg",full:"assets/gallery/rehearsal-2.jpg",alt:"Работа над сценой",caption:"Работа над сценой"}];let g="all",u=[],E=0;v&&v.addEventListener("click",()=>{T(-1)}),p&&p.addEventListener("click",()=>{T(1)}),h.forEach(C=>{C.addEventListener("click",()=>{q()})}),document.addEventListener("keydown",C=>{!l||l.hidden||(C.key==="Escape"?q():C.key==="ArrowRight"?T(1):C.key==="ArrowLeft"&&T(-1))}),c.length&&c.forEach(C=>{C.addEventListener("click",()=>{g=C.getAttribute("data-gallery-filter")||"all",c.forEach(M=>{M.classList.toggle("is-active",M===C)}),w()})}),w()}}function ee(){document.addEventListener("click",e=>{const t=e.target.closest(".faq-question");if(!t)return;const i=t.parentElement.querySelector(".faq-answer");if(!i)return;const r=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",(!r).toString()),i.classList.toggle("open")})}function te(){function e(t){const n=document.querySelector("#people");if(!n||!t)return;const i=n.querySelector("[data-people-filters]"),r=n.querySelector("[data-people-root]");if(!i||!r)return;const s=Array.isArray(t.groups)?t.groups:[];if(!s.length)return;let o=s[0].id,d=!1;function c(){return window.innerWidth<=768?3:6}function l(){return s.find(function(p){return p.id===o})}function f(){i.innerHTML="",s.forEach(function(p){const h=document.createElement("button");h.type="button",h.className="people-filter"+(p.id===o?" is-active":""),h.textContent=p.title||"",h.setAttribute("data-group-id",p.id),h.setAttribute("role","tab"),h.setAttribute("aria-selected",p.id===o?"true":"false"),i.appendChild(h)})}function a(){r.innerHTML="";const p=l();if(!p)return;const h=document.createElement("div");h.className="people-grid";const y=Array.isArray(p.people)?p.people.slice():[];y.sort(function(u,E){const L=typeof u.order=="number"?u.order:0,w=typeof E.order=="number"?E.order:0;return L-w});const g=c();if(d&&y.length,y.forEach(function(u,E){const L=document.createElement("article");L.className="person-card card-luxe";const w=document.createElement("figure");if(w.className="person-photo",u.photoUrl){const q=document.createElement("div");q.className="people-card-photo";const T=document.createElement("img");T.src=u.photoUrl,T.alt=u.name||"",q.appendChild(T),w.appendChild(q)}const S=document.createElement("div");S.className="person-content";const _=document.createElement("h4");if(_.className="person-name",_.textContent=u.name||"",S.appendChild(_),u.role){const q=document.createElement("p");q.className="person-role",q.textContent=u.role,S.appendChild(q)}if(Array.isArray(u.tags)&&u.tags.length){const q=document.createElement("div");q.className="person-tags",u.tags.forEach(function(T){const C=document.createElement("span");C.className="person-tag",C.textContent=T,q.appendChild(C)}),S.appendChild(q)}if(u.bio){const q=document.createElement("p");q.className="person-bio",q.textContent=u.bio,S.appendChild(q)}L.appendChild(w),L.appendChild(S),!d&&E>=g&&L.classList.add("person-card--collapsed"),h.appendChild(L)}),r.appendChild(h),p.note){const u=document.createElement("p");u.className="people-note text-muted",u.textContent=p.note,r.appendChild(u)}if(y.length>c()){const u=document.createElement("button");u.type="button",u.className="people-toggle",u.textContent=d?"Свернуть раздел":"Показать ещё людей",u.addEventListener("click",function(){d=!d,a()}),r.appendChild(u)}}i.addEventListener("click",function(p){const h=p.target.closest(".people-filter");if(!h)return;const y=h.getAttribute("data-group-id");!y||y===o||(o=y,d=!1,f(),a())}),f(),a();let v=window.innerWidth<=768;window.addEventListener("resize",function(){const p=window.innerWidth<=768;p!==v&&!d&&(v=p,a())})}fetch("assets/data/people.json").then(function(t){if(!t.ok)throw new Error("HTTP "+t.status);return t.json()}).then(function(t){e(t)}).catch(function(t){console.error("Не удалось загрузить данные людей театра:",t)})}const re=[{id:"review-masha-9",kind:"video",title:"Маша, 9 лет — перестала бояться сцены",quote:"После первого спектакля мы увидели совсем другого ребёнка — уверенного и светящегося.",authorLabel:"Мама Маши, 9 лет",thumbUrl:"assets/img/reviews/masha-9-thumb.webp",thumbAlt:"Кадр из видеоотзыва: мама Маши после спектакля",videoEmbedUrl:"",platform:"youtube",videoId:"XXXXXXXX",persona:"parent",childName:"Маша",childAge:9,yearsInStudio:3,yearsInStudioLabel:"3 года в студии",branch:"филиал у Комендантского",event:"Спектакль «Любовь у сливного бачка»",topics:["уверенность","первый_спектакль","атмосфера"],isFeatured:!0,order:10,isActive:!0,durationSeconds:75,durationLabel:"01:15",recordedAt:"2024-12-15"},{id:"review-kirill-12",kind:"video",title:"Кирилл, 12 лет — научился говорить вслух",quote:"Учителя в школе заметили, что Кирилл стал спокойно выходить к доске и не мямлить. Для нас это огромный шаг.",authorLabel:"Папа Кирилла, 12 лет",thumbUrl:"assets/img/reviews/kirill-12-thumb.webp",thumbAlt:"Кирилл с папой после спектакля",videoEmbedUrl:"",platform:"vk",videoId:"0000000_0000000",persona:"parent",childName:"Кирилл",childAge:12,yearsInStudio:2,yearsInStudioLabel:"2 года в студии",branch:"филиал на Пионерской",event:"Фестиваль «На берегах Невы»",topics:["речь","уверенность","фестивали"],isFeatured:!1,order:20,isActive:!0,durationSeconds:90,durationLabel:"01:30",recordedAt:"2024-03-10"},{id:"review-montage-camp",kind:"video",title:"Лагерь «Эмоция» — как вторая семья",quote:"Дети возвращаются из лагеря с ощущением, что у них появилась новая семья. Это не просто отдых, а глубокий опыт.",authorLabel:"Монтаж отзывов родителей",thumbUrl:"assets/img/reviews/camp-montage-thumb.webp",thumbAlt:"Кадры из смены лагеря студии «Эмоция»",videoEmbedUrl:"",platform:"youtube",videoId:"YYYYYYYY",persona:"montage",childName:"",childAge:null,yearsInStudio:null,yearsInStudioLabel:"",branch:"",event:"Лагерь «Эмоция»",topics:["лагерь","атмосфера","команда"],isFeatured:!1,order:30,isActive:!0,durationSeconds:120,durationLabel:"02:00",recordedAt:"2023-08-20"}];function X(e){var t=[];if(e.authorLabel)t.push(e.authorLabel);else if(e.childName||e.childAge){var n=[];e.childName&&n.push(e.childName),typeof e.childAge=="number"&&n.push(e.childAge+" лет"),n.length&&t.push(n.join(", "))}return e.yearsInStudioLabel&&t.push(e.yearsInStudioLabel),e.branch&&t.push(e.branch),t.join(" • ")}function ae(e){var t=document.createElement("article");t.className="review-video-card card card-hover",t.setAttribute("data-review-id",e.id);var n=document.createElement("div");if(n.className="review-video-card__poster",e.thumbUrl&&(n.style.backgroundImage="url("+e.thumbUrl+")"),e.durationLabel){var i=document.createElement("span");i.className="review-video-card__duration",i.textContent=e.durationLabel,n.appendChild(i)}var r=document.createElement("span");r.className="review-video-card__badge",r.textContent="Видеоотзыв";var s=document.createElement("h3");s.className="review-video-card__title",s.textContent=e.title||"";var o=document.createElement("p");return o.className="review-video-card__meta",o.textContent=X(e),t.appendChild(n),t.appendChild(r),t.appendChild(s),t.appendChild(o),t}function ne(e,t){var n=e.querySelector(".review-lightbox__title"),i=e.querySelector(".review-lightbox__quote"),r=e.querySelector(".review-lightbox__meta"),s=e.querySelector(".review-lightbox__video");if(s){if(s.innerHTML="",t.videoEmbedUrl){var o=document.createElement("iframe");o.src=t.videoEmbedUrl,o.title=t.title||"Видеоотзыв",o.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",o.allowFullscreen=!0,s.appendChild(o)}n&&(n.textContent=t.title||""),i&&(i.textContent=t.quote||""),r&&(r.textContent=X(t)+(t.event?" • "+t.event:"")),e.setAttribute("data-current-id",t.id),e.hidden=!1,e.setAttribute("aria-hidden","false"),e.classList.add("is-open"),document.body.classList.add("is-lightbox-open")}}function O(e){var t=e.querySelector(".review-lightbox__video");t&&(t.innerHTML=""),e.classList.remove("is-open"),e.hidden=!0,e.setAttribute("aria-hidden","true"),document.body.classList.remove("is-lightbox-open")}function ie(){var e=document.getElementById("reviews");if(!e)return;var t=e.querySelector("[data-reviews-strip]"),n=e.querySelector("[data-review-lightbox]");if(!t||!n)return;var i=re.filter(function(l){return l.isActive!==!1});if(!i.length){e.classList.add("section-reviews--empty");return}i.sort(function(l,f){var a=!!l.isFeatured,v=!!f.isFeatured;if(a!==v)return a?-1:1;var p=typeof l.order=="number"?l.order:0,h=typeof f.order=="number"?f.order:0;return p-h}),i.forEach(function(l){var f=ae(l);t.appendChild(f)}),t.addEventListener("click",function(l){var f=l.target.closest(".review-video-card");if(f){for(var a=f.getAttribute("data-review-id"),v=null,p=0;p<i.length;p++)if(i[p].id===a){v=i[p];break}v&&ne(n,v)}});var r=e.querySelector("[data-reviews-arrow='left']"),s=e.querySelector("[data-reviews-arrow='right']");function o(l){if(t){var f=t.querySelector(".review-video-card"),a=f?f.getBoundingClientRect().width:260;t.scrollBy({left:l*(a*.9+16),behavior:"smooth"})}}r&&r.addEventListener("click",function(){o(-1)}),s&&s.addEventListener("click",function(){o(1)});var d=n.querySelector("[data-review-lightbox-close]"),c=n.querySelector("[data-review-lightbox-backdrop]");d&&d.addEventListener("click",function(){O(n)}),c&&c.addEventListener("click",function(){O(n)}),document.addEventListener("keydown",function(l){l.key==="Escape"&&n.classList.contains("is-open")&&O(n)})}function se(e){return Array.isArray(e)?e.slice().sort(function(t,n){if(t.isAdults&&!n.isAdults)return-1;if(!t.isAdults&&n.isAdults)return 1;var i=(t.metro||"").toLowerCase(),r=(n.metro||"").toLowerCase();if(i<r)return-1;if(i>r)return 1;var s=(t.city||"").toLowerCase(),o=(n.city||"").toLowerCase();if(s<o)return-1;if(s>o)return 1;var d=(t.place||"").toLowerCase(),c=(n.place||"").toLowerCase();return d<c?-1:d>c?1:0}):[]}function oe(e,t,n,i){if(e){e.innerHTML="";var r=Array.isArray(t)?t.slice():[],s=(i||"").toLowerCase();if(n==="adults"&&(r=r.filter(function(d){return d.isAdults})),!r.length){var o=document.createElement("p");o.className="branches-empty",o.textContent=n==="adults"?"Сейчас группы для взрослых проходят только на части площадок. Уточните расписание у администратора студии.":"Филиалы временно недоступны.",e.appendChild(o);return}r.forEach(function(d){var c=document.createElement("article");c.className="branch-card card-hover"+(d.isAdults?" branch-card--adults":""),s&&(d.metro||"").toLowerCase()===s&&c.classList.add("branch-card--highlight");var l=document.createElement("div");l.className="branch-card-top";var f=document.createElement("span");f.className="branch-metro",f.textContent=d.metro||"";var a=document.createElement("h3");a.className="branch-place",a.textContent=d.place||"",l.appendChild(f),l.appendChild(a);var v=document.createElement("p");v.className="branch-address",v.textContent=d.address||"";var p=document.createElement("div");if(p.className="branch-meta",d.city){var h=document.createElement("span");h.className="branch-city",h.textContent=d.city,p.appendChild(h)}if(d.area){var y=document.createElement("span");y.className="branch-area",y.textContent=d.area,p.appendChild(y)}if(d.comment){var g=document.createElement("p");g.className="branch-comment",g.textContent=d.comment,c.appendChild(g)}if(d.phones&&d.phones.length){var u=document.createElement("div");u.className="branch-phones";var E=document.createElement("span");E.className="branch-phones-label",E.textContent=d.phones.length>1?"Телефоны администратора:":"Телефон администратора:",u.appendChild(E),d.phones.forEach(function(w){var S=document.createElement("a");S.className="branch-phone-link",S.href="tel:"+w.replace(/\s+/g,""),S.textContent=w,u.appendChild(S)}),c.appendChild(u)}if(d.isAdults){var L=document.createElement("span");L.className="branch-adults-badge",L.textContent="Группы 18+",c.appendChild(L)}c.appendChild(l),c.appendChild(v),p.childNodes.length&&c.appendChild(p),e.appendChild(c)})}}function le(e){var t={},n=[];return Array.isArray(e)&&(e.forEach(function(i){var r=i.metro||"";r&&(t[r]||(t[r]=!0,n.push(r)))}),n.sort(function(i,r){return i.localeCompare(r,"ru")})),n}function ce(e){var t={},n=[];return Array.isArray(e)&&(e.forEach(function(i){var r=i.area||"";r&&(t[r]||(t[r]=!0,n.push(r)))}),n.sort(function(i,r){return i.localeCompare(r,"ru")})),n}function de(e,t){if(e){if(e.innerHTML="",!Array.isArray(t)||!t.length){var n=document.createElement("li");n.className="branches-area-item",n.textContent="Санкт-Петербург и Кудрово",e.appendChild(n);return}t.forEach(function(i){var r=document.createElement("li");r.className="branches-area-item",r.textContent=i,e.appendChild(r)})}}function ue(){if(!window.location||!window.location.search)return"";try{var e=new URLSearchParams(window.location.search),t=e.get("metro");return t?t.trim():""}catch{return""}}function fe(e){var t=document.querySelector("#branches");if(!t)return;var n=t.querySelector("[data-branches-list]"),i=t.querySelectorAll("[data-branch-filter]"),r=t.querySelector("[data-branch-my-metro]"),s=t.querySelector("[data-branches-areas]");if(!n)return;var o=se(e),d="all",c="",l=ue();l&&(c=l);function f(){oe(n,o,d,c)}function a(g){d=g,i&&i.length&&i.forEach(function(u){var E=u.getAttribute("data-branch-filter")||"all";u.classList.toggle("is-active",E===d)}),f()}function v(g){if(c=g||"",r){var u=r.value||"";u!==c&&(r.value=c)}f()}if(r){r.innerHTML="";var p=document.createElement("option");p.value="",p.textContent="Не выбрано",r.appendChild(p);var h=le(o);h.forEach(function(g){var u=document.createElement("option");u.value=g,u.textContent=g,r.appendChild(u)}),c&&(r.value=c),r.addEventListener("change",function(){var g=r.value||"";v(g)})}if(s){var y=ce(o);de(s,y)}i&&i.length&&i.forEach(function(g){g.addEventListener("click",function(){var u=g.getAttribute("data-branch-filter")||"all";a(u)})}),f()}function pe(){fetch("assets/data/branches.json").then(function(e){if(!e.ok)throw new Error("HTTP "+e.status);return e.json()}).then(function(e){var t=Array.isArray(e)?e:e.branches||[];t.length&&fe(t)}).catch(function(e){console.error("Не удалось загрузить филиалы:",e)})}const he="assets/data/abonements.json";function me(e){const t=document.createElement("article");return t.className="abonement-card",(e.highlight||e.isHero)&&t.classList.add("abonement-card--highlight"),t.dataset.abonementId=e.id,t.innerHTML=`
    ${e.tagLine?`<p class="abonement-tagline">${e.tagLine}</p>`:""}
    <h3 class="abonement-name">${e.name}</h3>
    ${e.age?`<p class="abonement-age">${e.age}</p>`:""}
    ${e.description?`<p class="abonement-description">${e.description}</p>`:""}
    ${Array.isArray(e.bullets)&&e.bullets.length?`<ul class="abonement-list">
            ${e.bullets.map(n=>`<li>${n}</li>`).join("")}
          </ul>`:""}
    <div class="abonement-bottom">
      ${e.price?`<p class="abonement-price">${e.price}</p>`:""}
      ${e.note?`<p class="abonement-note">${e.note}</p>`:""}
    </div>
    ${e.badge?`<span class="abonement-badge">${e.badge}</span>`:""}
  `,e.isHero&&(t.classList.add("abonement-card--hero"),t.setAttribute("aria-label",`${e.name}. Чаще всего родители выбирают именно этот формат.`)),t}function ge(e,t){e.innerHTML="",t.forEach(n=>{const i=me(n);e.appendChild(i)})}function ye(){return fetch(he).then(e=>{if(!e.ok)throw new Error("Не удалось загрузить данные абонементов");return e.json()}).catch(e=>(console.error("[Abonements] Ошибка загрузки данных:",e),[]))}function ve(){const e=document.querySelector("[data-abonements-root]");if(!e)return;const t=document.getElementById("contacts"),n=r=>{r&&r.preventDefault(),t&&t.scrollIntoView({behavior:"smooth",block:"start"})};ye().then(r=>{if(!Array.isArray(r)||r.length===0)return;ge(e,r);const s=e.querySelector(".abonement-card--hero");s&&s.addEventListener("click",n)});const i=document.querySelectorAll('[data-scroll-to="contacts"]');i.length&&i.forEach(r=>{r.addEventListener("click",n)})}const be=[{id:"dynasty-2023",title:"VIII Международный фестиваль искусств «Династия»",city:"Санкт-Петербург",country:"Россия",level:"международный",years:[2023],directions:["theatre","film"],headline:"Два Гран-при за фильмы «Твори Добро» и «Особняк потерянных шагов» плюс лауреат III степени за спектакль «Город Чудаков».",entries:[{work:"«Твори Добро»",type:"film",status:"Гран-при",category:"Короткометражный фильм / «Дорогою добра»",year:2023,isTop:!0,note:""},{work:"«Особняк потерянных шагов»",type:"film",status:"Гран-при",category:"Короткометражный фильм / «Петербургские тайны»",year:2023,isTop:!0,note:""},{work:"«Город Чудаков»",type:"theatre",status:"Лауреат III степени",category:"Драматический театр",year:2023,isTop:!1,note:""}]},{id:"na-beregah-nevy-2018-2023",title:"Международный фестиваль искусств «На берегах Невы»",city:"Санкт-Петербург",country:"Россия",level:"международный",years:[2018,2019,2023],directions:["theatre"],headline:"Гран-при за спектакль «Город Чудаков» и лауреаты I степени за «Кошкин дом» и другие постановки студии.",entries:[{work:"«Город Чудаков»",type:"theatre",status:"Гран-при",category:"Драматический театр",year:2023,isTop:!0,note:""},{work:"«Кошкин дом»",type:"theatre",status:"Лауреат I степени",category:"Драматический театр",year:2019,isTop:!1,note:""},{work:"Другие спектакли студии",type:"theatre",status:"Лауреаты I степени",category:"",year:2018,isTop:!1,note:""}]},{id:"sokrovischa-vostoka-2022",title:"Международный фестиваль «Сокровища Востока»",city:"Казань",country:"Россия",level:"международный",years:[2022],directions:["theatre","speech"],headline:"Лауреат I степени за спектакль «Кошкин дом» и три лауреата I степени в номинации «Художественное слово».",entries:[{work:"«Кошкин дом»",type:"theatre",status:"Лауреат I степени",category:"Драматический театр",year:2022,isTop:!0,note:""},{work:"Художественное слово — участник 1",type:"speech",status:"Лауреат I степени",category:"Художественное слово (младшая группа)",year:2022,isTop:!1,note:""},{work:"Художественное слово — участник 2",type:"speech",status:"Лауреат I степени",category:"Художественное слово (средняя группа)",year:2022,isTop:!1,note:""},{work:"Художественное слово — участник 3",type:"speech",status:"Лауреат I степени",category:"Художественное слово (старшая группа)",year:2022,isTop:!1,note:""}]},{id:"nesebar-2019",title:"Фестивали «Солнце – Радость – Красота» и «Звёзды Несебра»",city:"Несебр",country:"Болгария",level:"международный",years:[2019],directions:["theatre"],headline:"Первое место на фестивале «Солнце – Радость – Красота» и лауреаты II степени на фестивале «Звёзды Несебра».",entries:[{work:"Постановка студии (театр)",type:"theatre",status:"1 место",category:"Театральное искусство — нестандартные формы",year:2019,isTop:!0,note:"Фестиваль «Солнце – Радость – Красота»"},{work:"Постановка студии (театр)",type:"theatre",status:"Лауреаты II степени",category:"",year:2019,isTop:!1,note:"Фестиваль «Звёзды Несебра»"}]},{id:"nevskoe-siyanie-2023-2024",title:"Международный фестиваль «Невское сияние»",city:"Санкт-Петербург",country:"Россия",level:"международный",years:[2023,2024],directions:["theatre","speech"],headline:"«Кошкин дом» — лауреат II степени, чтецы студии берут весь диапазон наград от I до III степени.",entries:[{work:"«Кошкин дом»",type:"theatre",status:"Лауреат II степени",category:"Драматический театр",year:2023,isTop:!0,note:""},{work:"Художественное слово — участники студии",type:"speech",status:"Лауреаты I–III степеней",category:"Художественное слово",year:2023,isTop:!1,note:""},{work:"Новые участники художественного слова",type:"speech",status:"Лауреаты и дипломанты",category:"Художественное слово",year:2024,isTop:!1,note:""}]},{id:"starkids-2024",title:"Фестиваль STARKIDS!",city:"Санкт-Петербург",country:"Россия",level:"фестиваль-конкурс",years:[2024],directions:["theatre"],headline:"Спектакль «Кошкин дом» занимает 1 место в своей возрастной категории.",entries:[{work:"«Кошкин дом»",type:"theatre",status:"1 место",category:"Драматический театр (возрастная категория студии)",year:2024,isTop:!0,note:""}]},{id:"ltfest-zimniy-les-2025",title:"LT FEST «Зимний лес»",city:"Санкт-Петербург",country:"Россия",level:"фестиваль",years:[2025],directions:["theatre"],headline:"«Кошкин дом» — лауреат I степени и обладатель спецприза жюри за актёрское мастерство, «Лесная царевна» — лауреат III степени.",entries:[{work:"«Кошкин дом»",type:"theatre",status:"Лауреат I степени",category:"Драматический театр",year:2025,isTop:!0,note:"Спецприз жюри за актёрское мастерство"},{work:"«Лесная царевна»",type:"theatre",status:"Лауреат III степени",category:"Драматический театр",year:2025,isTop:!1,note:""}]}];function Ee(e){const t=[];return e.forEach(function(n){n.entries&&n.entries.forEach(function(i){i.isTop&&t.push({festivalId:n.id,label:i.status+" — "+n.title,sublabel:i.work,level:n.level,city:n.city,year:i.year})})}),t.sort(function(n,i){const r=function(o){return o?o.indexOf("Гран-при")!==-1?3:o.indexOf("1 место")!==-1?2:o.indexOf("Лауреат I")!==-1?1:0:0},s=r(i.label)-r(n.label);return s!==0?s:(i.year||0)-(n.year||0)}),t}function we(e){return!e||!e.length?"":e.map(function(t){return t==="theatre"?'<span class="festival-tag festival-tag--theatre">Театр</span>':t==="film"?'<span class="festival-tag festival-tag--film">Кино</span>':t==="speech"?'<span class="festival-tag festival-tag--speech">Художественное слово</span>':""}).join("")}function Le(e,t){if(!e)return;const n=window.innerWidth>=1024;function i(h){var y=h.label.indexOf("Гран-при")!==-1;return'<article class="award-badge'+(y?" award-badge--grandprix":"")+'" data-festival-id="'+h.festivalId+'"><h3 class="award-badge-title">'+h.label+"</h3>"+(h.sublabel?'<p class="award-badge-text">'+h.sublabel+"</p>":"")+"</article>"}var r=t.map(i).join(""),s=e.closest(".awards-strip--auto"),o=1;if(s)if(o=n?5:3,n){var d=-(100/o);e.style.setProperty("--awards-shift",d+"%")}else e.style.removeProperty("--awards-shift");e.innerHTML="";for(var c=0;c<o;c++)e.innerHTML+=r;var l=0,f=e.querySelectorAll(".award-badge");if(f.forEach(function(h,y){if(!(o>1&&y>=t.length)){var g=h.getBoundingClientRect();l=Math.max(l,g.width,g.height)}}),l>0){var a=Math.ceil(l+20);e.style.setProperty("--award-badge-size",a+"px")}if(o>1){var v=e.scrollWidth/o,p=e.parentElement;p&&(p.scrollLeft=v*Math.floor(o/2)),e.dataset.awardsBaseWidth=String(v),e.dataset.awardsRepeat=String(o)}e.__awardsClickBound||(e.addEventListener("click",function(h){var y=h.target.closest(".award-badge");if(y){var g=y.getAttribute("data-festival-id");if(g){var u=document.querySelector('[data-festival-id="'+g+'"]');u&&u.scrollIntoView({behavior:"smooth",block:"start"})}}}),e.__awardsClickBound=!0)}function Ce(e){if(!e)return;const t=e.querySelector(".awards-strip-viewport"),n=e.querySelector(".awards-strip-inner");if(!t||!n)return;const i=n.dataset.awardsRepeat?parseInt(n.dataset.awardsRepeat,10):1,r=n.dataset.awardsBaseWidth?parseFloat(n.dataset.awardsBaseWidth):0;if(i>1&&r>0){const l=r*.5,f=r*(i-1.5);t.addEventListener("scroll",function(){t.scrollLeft>f?t.scrollLeft-=r*(i-2):t.scrollLeft<l&&(t.scrollLeft+=r*(i-2))})}let s=!1,o=0,d=0;t.addEventListener("pointerdown",function(l){s=!0,o=l.clientX,d=t.scrollLeft,t.classList.add("is-dragging"),t.setPointerCapture(l.pointerId)}),t.addEventListener("pointermove",function(l){if(!s)return;const f=l.clientX-o;t.scrollLeft=d-f});function c(){s=!1,t.classList.remove("is-dragging")}t.addEventListener("pointerup",c),t.addEventListener("pointercancel",c),t.addEventListener("pointerleave",c),t.addEventListener("wheel",function(l){const f=Math.abs(l.deltaX)>Math.abs(l.deltaY)?l.deltaX:l.deltaY;t.scrollLeft+=f,l.preventDefault()},{passive:!1})}function Ae(e,t,n){if(!e)return;e.innerHTML="";const i=t.slice().sort(function(s,o){const d=s.years&&s.years.length?Math.max.apply(null,s.years):0;return(o.years&&o.years.length?Math.max.apply(null,o.years):0)-d}),r=typeof n=="number"?n:i.length;i.slice(0,r).forEach(function(s){const o=document.createElement("article");o.className="festival-card",o.setAttribute("data-festival-id",s.id);const d=s.years&&s.years.length?s.years.join(" / "):"",c=[];d&&c.push(d),s.city&&c.push(s.city),s.level&&c.push(s.level);const l=c.join(" · "),f=document.createElement("header"),a=document.createElement("h3");a.className="festival-card-title",a.textContent=s.title;const v=document.createElement("p");v.className="festival-card-meta",v.textContent=l,f.appendChild(a),f.appendChild(v);const p=document.createElement("p");p.className="festival-card-headline",p.textContent=s.headline;const h=document.createElement("ul");h.className="festival-card-list",(s.entries||[]).slice(0,4).forEach(function(g){const u=[];g.status&&u.push(g.status),g.work&&u.push(g.work),g.category&&u.push(g.category),g.note&&u.push(g.note);const E=document.createElement("li");E.textContent=u.join(" — "),h.appendChild(E)});const y=document.createElement("div");y.className="festival-tags",y.innerHTML=we(s.directions),o.appendChild(f),o.appendChild(p),o.appendChild(h),o.appendChild(y),e.appendChild(o)})}function Se(e){const t=document.querySelector("#awards");if(!t)return;const n=t.querySelector("[data-top-awards-root]"),i=t.querySelector("[data-festivals-root]");if(!n||!i)return;const r=Ee(e);Le(n,r),Ce(t.querySelector("[data-awards-strip]"));let s=!1;function o(){const c=window.innerWidth<=768,l=c?2:e.length;if(Ae(i,e,s?e.length:l),c&&e.length>l){let f=i.querySelector(".awards-toggle");f||(f=document.createElement("button"),f.type="button",f.className="people-toggle awards-toggle",f.textContent=s?"Свернуть фестивали":"Показать ещё фестивали",f.addEventListener("click",function(){s=!s,f.textContent=s?"Свернуть фестивали":"Показать ещё фестивали",o()}),i.appendChild(f)),i.appendChild(f)}}o();let d=window.innerWidth<=768;window.addEventListener("resize",function(){const c=window.innerWidth<=768;c!==d&&(s=!1,o(),d=c)})}function xe(){Se(be)}function qe(){const e=document.querySelector(".section-snow-queen"),t=e?e.querySelector(".snow-queen-grid"):null;!e||!t||("IntersectionObserver"in window?new IntersectionObserver((i,r)=>{i.forEach(s=>{s.isIntersecting&&(setTimeout(()=>{t.classList.add("snow-queen-grid--visible")},3e3),r.unobserve(s.target))})},{threshold:.4}).observe(e):t.classList.add("snow-queen-grid--visible"))}document.addEventListener("DOMContentLoaded",()=>{Y(),V(),z(),ee(),qe(),G(),K(),Q(),J(),Z(),te(),ie(),pe(),ve(),xe();const e=document.querySelector(".section-casting .casting-btn-secondary");e&&e.addEventListener("click",t=>{t.preventDefault()})});
